<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω nh√¢n vi√™n</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<h2 class="mb-4">Qu·∫£n l√Ω nh√¢n vi√™n</h2>

<!-- Form t√¨m ki·∫øm -->
<form th:action="@{/employees}" method="get" class="row g-3 mb-4">
    <div class="col-auto">
        <input type="text" name="phone" class="form-control" placeholder="T√¨m theo s·ªë ƒëi·ªán tho·∫°i" th:value="${phone}">
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-primary">T√¨m ki·∫øm</button>
    </div>
    <div class="col-auto">
        <a th:href="@{/employees}" class="btn btn-secondary">Reset</a>
    </div>
    <div class="col-auto">
        <a th:href="@{/employees/add}" class="btn btn-success">‚ûï Th√™m nh√¢n vi√™n</a>
    </div>
</form>

<!-- B·∫£ng danh s√°ch -->
<table class="table table-bordered table-hover" th:object="${employees}">
    <thead>
    <tr>
        <th>
            <a th:href="@{/employees(sort='name', dir=${dir == 'asc' ? 'desc' : 'asc'})}">
                H·ªç t√™n
                <span th:text="${sort == 'name' ? (dir == 'asc' ? 'üîº' : 'üîΩ') : ''}"></span>
            </a>
        </th>
        <th>ƒêi·ªán tho·∫°i</th>
        <th>Email</th>
        <th>
            <a th:href="@{/employees(sort='salary', dir=${dir == 'asc' ? 'desc' : 'asc'})}">
                L∆∞∆°ng
                <span th:text="${sort == 'salary' ? (dir == 'asc' ? 'üîº' : 'üîΩ') : ''}"></span>
            </a>
        </th>
        <th>Ng√†y t·∫°o</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="e : ${employees}">
        <td th:text="${e.name}"></td>
        <td th:text="${e.phoneNumber}"></td>
        <td th:text="${e.email}"></td>
        <td th:text="${#numbers.formatDecimal(e.salary, 1, 'COMMA', 2, 'POINT')}"></td>
        <td th:text="${#temporals.format(e.createdAt, 'dd/MM/yyyy')}"></td>
        <td>
            <a th:href="@{'/employees/edit/' + ${e.id}}" class="btn btn-sm btn-warning">S·ª≠a</a>
            <a th:href="@{'/employees/delete/' + ${e.id}}" class="btn btn-sm btn-danger"
               onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a?')">X√≥a</a>
        </td>
    </tr>
    </tbody>
</table>

<!-- Ph√¢n trang -->
<nav th:if="${employees.totalPages > 0}">
    <ul class="pagination">
        <li class="page-item" th:classappend="${employees.first} ? 'disabled'">
            <a class="page-link" th:href="@{/employees(page=${employees.number - 1}, phone=${phone}, sort=${sort}, dir=${dir})}">Tr∆∞·ªõc</a>
        </li>
        <li class="page-item" th:each="i : ${#numbers.sequence(0, employees.totalPages - 1)}"
            th:classappend="${i == employees.number} ? 'active'">
            <a class="page-link" th:href="@{/employees(page=${i}, phone=${phone}, sort=${sort}, dir=${dir})}"
               th:text="${i + 1}">1</a>
        </li>
        <li class="page-item" th:classappend="${employees.last} ? 'disabled'">
            <a class="page-link" th:href="@{/employees(page=${employees.number + 1}, phone=${phone}, sort=${sort}, dir=${dir})}">Sau</a>
        </li>
    </ul>
</nav>

</body>
</html>
